"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthenticateCognitoAction=void 0;const jsiiDeprecationWarnings=require("../../.warnings.jsii.js"),JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti"),aws_ec2_1=require("../../aws-ec2"),elbv2=require("../../aws-elasticloadbalancingv2");class AuthenticateCognitoAction extends elbv2.ListenerAction{static config(options){return{userPoolArn:options.userPool.userPoolArn,userPoolClientId:options.userPoolClient.userPoolClientId,userPoolDomain:options.userPoolDomain.domainName,authenticationRequestExtraParams:options.authenticationRequestExtraParams,onUnauthenticatedRequest:options.onUnauthenticatedRequest,scope:options.scope,sessionCookieName:options.sessionCookieName,sessionTimeout:options.sessionTimeout?.toSeconds().toString()}}constructor(options){super({type:"authenticate-cognito",authenticateCognitoConfig:AuthenticateCognitoAction.config(options)},options.next);try{jsiiDeprecationWarnings.aws_cdk_lib_aws_elasticloadbalancingv2_actions_AuthenticateCognitoActionProps(options)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,AuthenticateCognitoAction),error}this.allowHttpsOutbound=options.allowHttpsOutbound??!0,this.addRuleAction({type:"authenticate-cognito",authenticateCognitoConfig:{...AuthenticateCognitoAction.config(options),sessionTimeout:options.sessionTimeout?.toSeconds()}})}bind(scope,listener,associatingConstruct){try{jsiiDeprecationWarnings.aws_cdk_lib_aws_elasticloadbalancingv2_IApplicationListener(listener)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.bind),error}super.bind(scope,listener,associatingConstruct),this.allowHttpsOutbound&&listener.connections.allowToAnyIpv4(aws_ec2_1.Port.tcp(443),"Allow to IdP endpoint")}}exports.AuthenticateCognitoAction=AuthenticateCognitoAction,_a=JSII_RTTI_SYMBOL_1,AuthenticateCognitoAction[_a]={fqn:"aws-cdk-lib.aws_elasticloadbalancingv2_actions.AuthenticateCognitoAction",version:"2.94.0"};
